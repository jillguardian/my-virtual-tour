<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorator="default">
<head>
    <title th:text="${location?.id}? #{church.edit} : #{church.add}">Church</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet.css"
          th:href="@{/webjars/leaflet/0.7.3/leaflet.css}" />
    <style>
        @-moz-document url-prefix() {
            fieldset { display: table-cell; }
        }
        .has-error .select2-selection {
            border-color: #dd4b39 !important;
        }
        .form-group.location-image > .thumbnail {
            margin-bottom: 0;
        }
        .form-group.location-image > .thumbnail > img {
            object-fit: cover;
            height: 250px;
        }
        .form-group.location-image > input[type=file] {
            display: none;
        }
    </style>
</head>
<body>
<h1 layout:fragment="content-heading" th:text="${location?.id}? #{church.edit} : #{church.add}">
    Church
</h1>
<ol th:fragment="breadcrumb" class="breadcrumb">
    <li>
        <a th:href="@{/}">
            <i class="fa fa-dashboard"></i> <span th:text="#{dashboard}" th:remove="tag">Dashboard</span>
        </a>
    </li>
    <li>
        <a th:href="@{/location/church}">
            <i class="fa fa-map-o"></i> <span th:text="#{churches}" th:remove="tag">Churches</span>
        </a>
    </li>
    <th:block th:with="text=#{new}">
        <li class="active">
            <i class="fa fa-map-marker"></i>
            <span th:text="${location.id != null ? location.id : text}" th:remove="tag">#</span>
        </li>
    </th:block>
</ol>
<div layout:fragment="content-body">
    <div class="row">
        <div class="col-xs-12">
            <!-- TODO: Insert notification via Javascript.
            <div class="row" th:if="${#fields.hasGlobalErrors()}">
                <div class="col-md-12">
                    <div th:with="text=#{error.message}, errors=${#fields.globalErrors()}">
                        <div th:replace="fragment/list-item-alert :: alert (type='danger', message=${text}, items=${errors}, classes='', style='')">Errors</div>
                    </div>
                </div>
            </div>
            -->
            <div class="nav-tabs-custom">
                <ul class="nav nav-tabs nav-justified">
                    <li role="presentation" class="active">
                        <a href="#general" th:value="#{general}" data-toggle="tab" role="tab">General</a>
                    </li>
                    <li role="presentation">
                        <a href="#significance" th:value="#{significance}" data-toggle="tab" role="tab">Significance</a>
                    </li>
                    <li role="presentation">
                        <a href="#others" th:value="#{others}" data-toggle="tab" role="tab">Others</a>
                    </li>
                </ul>
                <form th:if="${location}"
                      th:action="@{/location/church/save}"
                      th:object="${location}"
                      method="POST"
                      role="form"
                      enctype="multipart/form-data">
                    <div class="tab-content">
                        <div class="tab-pane fade in show active" id="general">
                            <div class="box-body">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group" th:classappend="${#fields.hasErrors('id')} ? has-error : ''" th:hidden="true">
                                            <input type="hidden" th:field="*{id}" readonly="readonly" class="form-control" id="id" th:placeholder="#{id.placeholder}" placeholder="#"/>
                                        </div>
                                        <div class="form-group" th:classappend="${#fields.hasErrors('name')} ? has-error : ''">
                                            <label for="name" th:text="#{name}">Name</label>
                                            <input type="text" th:field="*{name}" class="form-control" id="name" th:placeholder="#{location.name.placeholder}" placeholder="Enter the name of site"/>
                                            <p class="help-block" th:if="${#fields.hasErrors('name')}" th:errors="*{name}"></p>
                                        </div>
                                        <div class="form-group" th:classappend="${#fields.hasErrors('type')} ? has-error : ''">
                                            <label for="type" th:text="#{type}">Type</label>
                                            <select th:field="*{type}"
                                                    id="type"
                                                    class="form-control"
                                                    style="width: 100%;"
                                                    tabindex="-1"
                                                    aria-hidden="true">
                                                <option value=""></option>
                                                <option th:text="#{parish}"
                                                        th:value="${T(ph.edu.tsu.tour.core.location.Church.Type).PARISH}">Parish</option>
                                                <option th:text="#{shrine}"
                                                        th:value="${T(ph.edu.tsu.tour.core.location.Church.Type).SHRINE}">Shrine</option>
                                                <option th:text="#{chapel}"
                                                        th:value="${T(ph.edu.tsu.tour.core.location.Church.Type).CHAPEL}">Chapel</option>
                                            </select>
                                            <p class="help-block" th:if="${#fields.hasErrors('type')}" th:errors="*{type}"></p>
                                        </div>
                                        <div class="row">
                                            <div class="col-xs-12 col-md-6">
                                                <div class="form-group" th:classappend="${#fields.hasErrors('saint')} ? has-error : ''">
                                                    <label for="saint" th:text="#{saint}">Saint</label>
                                                    <input type="text" th:field="*{saint}" class="form-control" id="saint" th:placeholder="#{saint.placeholder}" placeholder="Enter name of saint"/>
                                                    <p class="help-block" th:if="${#fields.hasErrors('saint')}" th:errors="*{saint}"></p>
                                                </div>
                                            </div>
                                            <div class="col-xs-12 col-md-6">
                                                <div class="form-group" th:classappend="${#fields.hasErrors('feastDay')} ? has-error : ''">
                                                    <label for="feast-day" th:text="#{feast-day}">Feast Day</label>
                                                    <div class="input-group date">
                                                        <div class="input-group-addon">
                                                            <i class="fa fa-calendar"></i>
                                                        </div>
                                                        <input type="text" th:field="*{feastDay}" class="form-control" id="feast-day" data-inputmask="'alias': 'mm/dd'" data-mask="" th:placeholder="#{feast-day.placeholder}" placeholder="Enter feast day"/>
                                                    </div>
                                                    <p class="help-block" th:if="${#fields.hasErrors('feastDay')}" th:errors="*{feastDay}"></p>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group" th:classappend="${#fields.hasErrors('canonicalErectionDay')} ? has-error : ''">
                                            <label for="canonical-erection-day" th:text="#{canonical-erection-day}">Canonical Erection Day</label>
                                            <div class="input-group date">
                                                <div class="input-group-addon">
                                                    <i class="fa fa-calendar"></i>
                                                </div>
                                                <input type="text" th:field="*{canonicalErectionDay}" class="form-control" id="canonical-erection-day" data-inputmask="'alias': 'mm/dd/yyyy'" data-mask="" data-date-end-date="0d" th:placeholder="#{canonical-erection-day.placeholder}" placeholder="Enter date of canonical erection"/>
                                            </div>
                                            <p class="help-block" th:if="${#fields.hasErrors('canonicalErectionDay')}" th:errors="*{canonicalErectionDay}"></p>
                                        </div>
                                        <div class="form-group" th:classappend="${#fields.hasErrors('dedicationDay')} ? has-error : ''">
                                            <label for="dedication-day" th:text="#{dedication-day}">Date of Dedication, if dedicated</label>
                                            <div class="input-group date">
                                                <div class="input-group-addon">
                                                    <i class="fa fa-calendar"></i>
                                                </div>
                                                <input type="text" th:field="*{dedicationDay}" class="form-control" id="dedication-day" data-inputmask="'alias': 'mm/dd/yyyy'" data-mask="" data-date-end-date="0d" th:placeholder="#{dedication-day.placeholder}" placeholder="Enter date of dedication"/>
                                            </div>
                                            <p class="help-block" th:if="${#fields.hasErrors('dedicationDay')}" th:errors="*{dedicationDay}"></p>
                                        </div>
                                        <div class="form-group" th:classappend="${#fields.hasErrors('priest')} ? has-error : ''">
                                            <label for="priest" th:text="#{priest}">Priest</label>
                                            <input type="text" th:field="*{priest}" class="form-control" id="priest" th:placeholder="#{priest.placeholder}" placeholder="Enter name of priest"/>
                                            <p class="help-block" th:if="${#fields.hasErrors('priest')}" th:errors="*{priest}"></p>
                                        </div>
                                        <div class="form-group">
                                            <div class="row">
                                                <div class="col-xs-6">
                                                    <button type="button" class="btn btn-success btn-block" role="button" data-toggle="modal" data-target="#mass-schedules-modal" th:text="#{mass-schedules}">Mass Schedules</button>
                                                    <div id="mass-schedules-modal" class="modal fade schedules-modal" tabindex="-1" role="dialog">
                                                        <div class="modal-dialog modal-lg" role="document">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                                                    <h4 class="modal-title" th:text="#{mass-schedules}">Mass Schedules</h4>
                                                                </div>
                                                                <div class="modal-body">
                                                                    <th:block th:each="massSchedule, iterator: *{massSchedules}">
                                                                        <div class="row" th:id="${'massSchedule' + iterator.index}" th:with="id=${'massSchedule' + iterator.index}">
                                                                            <div class="col-md-3">
                                                                                <div class="form-group" th:classappend="${#fields.hasErrors('massSchedules[__${iterator.index}__].day')} ? has-error : ''">
                                                                                    <select th:field="*{massSchedules[__${iterator.index}__].day}"
                                                                                            class="form-control day"
                                                                                            style="width: 100%;"
                                                                                            tabindex="-1"
                                                                                            aria-hidden="true">
                                                                                        <option value=""></option>
                                                                                        <option th:text="#{sunday}"
                                                                                                th:value="${T(java.time.DayOfWeek).SUNDAY}">Sunday</option>
                                                                                        <option th:text="#{monday}"
                                                                                                th:value="${T(java.time.DayOfWeek).MONDAY}">Monday</option>
                                                                                        <option th:text="#{tuesday}"
                                                                                                th:value="${T(java.time.DayOfWeek).TUESDAY}">Tuesday</option>
                                                                                        <option th:text="#{wednesday}"
                                                                                                th:value="${T(java.time.DayOfWeek).WEDNESDAY}">Wednesday</option>
                                                                                        <option th:text="#{thursday}"
                                                                                                th:value="${T(java.time.DayOfWeek).THURSDAY}">Thursday</option>
                                                                                        <option th:text="#{friday}"
                                                                                                th:value="${T(java.time.DayOfWeek).FRIDAY}">Friday</option>
                                                                                        <option th:text="#{saturday}"
                                                                                                th:value="${T(java.time.DayOfWeek).SATURDAY}">Saturday</option>
                                                                                    </select>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-md-2">
                                                                                <div class="bootstrap-timepicker">
                                                                                    <div class="form-group" th:classappend="${#fields.hasErrors('massSchedules[__${iterator.index}__].start')} ? has-error : ''">
                                                                                        <div class="input-group">
                                                                                            <input type="text"
                                                                                                   th:field="*{massSchedules[__${iterator.index}__].start}"
                                                                                                   class="form-control timepicker schedule" />
                                                                                            <div class="input-group-addon">
                                                                                                <i class="fa fa-clock-o"></i>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-md-2">
                                                                                <div class="bootstrap-timepicker">
                                                                                    <div class="form-group" th:classappend="${#fields.hasErrors('massSchedules[__${iterator.index}__].end')} ? has-error : ''">
                                                                                        <div class="input-group">
                                                                                            <input type="text"
                                                                                                   th:field="*{massSchedules[__${iterator.index}__].end}"
                                                                                                   class="form-control timepicker schedule" />
                                                                                            <div class="input-group-addon">
                                                                                                <i class="fa fa-clock-o"></i>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-md-4">
                                                                                <div class="form-group" th:classappend="${#fields.hasErrors('massSchedules[__${iterator.index}__].language')} ? has-error : ''">
                                                                                    <select th:field="*{massSchedules[__${iterator.index}__].language}"
                                                                                            class="form-control language"
                                                                                            style="width: 100%;"
                                                                                            tabindex="-1"
                                                                                            aria-hidden="true">
                                                                                        <option value=""></option>
                                                                                        <option th:text="#{english}"
                                                                                                th:value="${T(ph.edu.tsu.tour.web.common.dto.ChurchPayload$SchedulePayload.Language).ENGLISH}">English</option>
                                                                                        <option th:text="#{tagalog}"
                                                                                                th:value="${T(ph.edu.tsu.tour.web.common.dto.ChurchPayload$SchedulePayload.Language).TAGALOG}">Tagalog</option>
                                                                                        <option th:text="#{kapampangan}"
                                                                                                th:value="${T(ph.edu.tsu.tour.web.common.dto.ChurchPayload$SchedulePayload.Language).KAPAMPANGAN}">Kapampangan</option>
                                                                                        <option th:text="#{ilocano}"
                                                                                                th:value="${T(ph.edu.tsu.tour.web.common.dto.ChurchPayload$SchedulePayload.Language).ILOCANO}">Ilocano</option>
                                                                                        <option th:text="#{latin}"
                                                                                                th:value="${T(ph.edu.tsu.tour.web.common.dto.ChurchPayload$SchedulePayload.Language).LATIN}">Latin</option>
                                                                                    </select>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-md-1">
                                                                                <div class="form-group">
                                                                                    <button type="button" class="btn btn-danger btn-block delete-schedule" aria-label="delete" th:attr="data-target=${id}" onclick="deleteMassSchedule(event)">
                                                                                        <i class="fa fas fa-minus-circle"></i>
                                                                                    </button>
                                                                                </div>
                                                                            </div>
                                                                            <p class="help-block" th:if="${#fields.hasErrors('massSchedules[__${iterator.index}__]')}" th:errors="*{massSchedules[__*{#lists.size(massSchedules)}__]}"></p>
                                                                        </div>
                                                                    </th:block>
                                                                </div>
                                                                <div class="modal-footer">
                                                                    <button type="button" class="btn btn-primary new-schedule" th:value="#{add-new-schedule}">Add New Schedule</button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-xs-6">
                                                    <button type="button" class="btn btn-success btn-block" role="button" data-toggle="modal" data-target="#confession-schedules-modal" th:text="#{confession-schedules}">Confession Schedules</button>
                                                    <div id="confession-schedules-modal" class="modal fade schedules-modal" tabindex="-1" role="dialog">
                                                        <div class="modal-dialog modal-lg" role="document">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                                                    <h4 class="modal-title" th:text="#{confession-schedules}">Confession Schedules</h4>
                                                                </div>
                                                                <div class="modal-body">
                                                                    <th:block th:each="confessionSchedule, iterator: *{confessionSchedules}">
                                                                        <div class="row" th:id="${'confessionSchedule' + iterator.index}" th:with="id=${'confessionSchedule' + iterator.index}">
                                                                            <div class="col-md-3">
                                                                                <div class="form-group" th:classappend="${#fields.hasErrors('confessionSchedules[__${iterator.index}__].day')} ? has-error : ''">
                                                                                    <select th:field="*{confessionSchedules[__${iterator.index}__].day}"
                                                                                            class="form-control day"
                                                                                            style="width: 100%;"
                                                                                            tabindex="-1"
                                                                                            aria-hidden="true">
                                                                                        <option value=""></option>
                                                                                        <option th:text="#{sunday}"
                                                                                                th:value="${T(java.time.DayOfWeek).SUNDAY}">Sunday</option>
                                                                                        <option th:text="#{monday}"
                                                                                                th:value="${T(java.time.DayOfWeek).MONDAY}">Monday</option>
                                                                                        <option th:text="#{tuesday}"
                                                                                                th:value="${T(java.time.DayOfWeek).TUESDAY}">Tuesday</option>
                                                                                        <option th:text="#{wednesday}"
                                                                                                th:value="${T(java.time.DayOfWeek).WEDNESDAY}">Wednesday</option>
                                                                                        <option th:text="#{thursday}"
                                                                                                th:value="${T(java.time.DayOfWeek).THURSDAY}">Thursday</option>
                                                                                        <option th:text="#{friday}"
                                                                                                th:value="${T(java.time.DayOfWeek).FRIDAY}">Friday</option>
                                                                                        <option th:text="#{saturday}"
                                                                                                th:value="${T(java.time.DayOfWeek).SATURDAY}">Saturday</option>
                                                                                    </select>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-md-2">
                                                                                <div class="bootstrap-timepicker">
                                                                                    <div class="form-group" th:classappend="${#fields.hasErrors('confessionSchedules[__${iterator.index}__].start')} ? has-error : ''">
                                                                                        <div class="input-group">
                                                                                            <input type="text"
                                                                                                   th:field="*{confessionSchedules[__${iterator.index}__].start}"
                                                                                                   class="form-control timepicker schedule" />
                                                                                            <div class="input-group-addon">
                                                                                                <i class="fa fa-clock-o"></i>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-md-2">
                                                                                <div class="bootstrap-timepicker">
                                                                                    <div class="form-group" th:classappend="${#fields.hasErrors('confessionSchedules[__${iterator.index}__].end')} ? has-error : ''">
                                                                                        <div class="input-group">
                                                                                            <input type="text"
                                                                                                   th:field="*{confessionSchedules[__${iterator.index}__].end}"
                                                                                                   class="form-control timepicker schedule" />
                                                                                            <div class="input-group-addon">
                                                                                                <i class="fa fa-clock-o"></i>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-md-4">
                                                                                <div class="form-group" th:classappend="${#fields.hasErrors('confessionSchedules[__${iterator.index}__].language')} ? has-error : ''">
                                                                                    <select th:field="*{confessionSchedules[__${iterator.index}__].language}"
                                                                                            class="form-control language"
                                                                                            style="width: 100%;"
                                                                                            tabindex="-1"
                                                                                            aria-hidden="true">
                                                                                        <option value=""></option>
                                                                                        <option th:text="#{english}"
                                                                                                th:value="${T(ph.edu.tsu.tour.web.common.dto.ChurchPayload$SchedulePayload.Language).ENGLISH}">English</option>
                                                                                        <option th:text="#{tagalog}"
                                                                                                th:value="${T(ph.edu.tsu.tour.web.common.dto.ChurchPayload$SchedulePayload.Language).TAGALOG}">Tagalog</option>
                                                                                        <option th:text="#{kapampangan}"
                                                                                                th:value="${T(ph.edu.tsu.tour.web.common.dto.ChurchPayload$SchedulePayload.Language).KAPAMPANGAN}">Kapampangan</option>
                                                                                        <option th:text="#{ilocano}"
                                                                                                th:value="${T(ph.edu.tsu.tour.web.common.dto.ChurchPayload$SchedulePayload.Language).ILOCANO}">Ilocano</option>
                                                                                        <option th:text="#{latin}"
                                                                                                th:value="${T(ph.edu.tsu.tour.web.common.dto.ChurchPayload$SchedulePayload.Language).LATIN}">Latin</option>
                                                                                    </select>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-md-1">
                                                                                <div class="form-group">
                                                                                    <button type="button" class="btn btn-danger btn-block delete-schedule" aria-label="delete" th:attr="data-target=${id}" onclick="deleteConfessionSchedule(event)">
                                                                                        <i class="fa fas fa-minus-circle"></i>
                                                                                    </button>
                                                                                </div>
                                                                            </div>
                                                                            <p class="help-block" th:if="${#fields.hasErrors('confessionSchedules[__${iterator.index}__]')}" th:errors="*{confessionSchedules[__*{#lists.size(confessionSchedules)}__]}"></p>
                                                                        </div>
                                                                    </th:block>
                                                                </div>
                                                                <div class="modal-footer">
                                                                    <button type="button" class="btn btn-primary new-schedule" th:value="#{add-new-schedule}">Add New Schedule</button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="form-group col-xs-6 location-image" th:classappend="${#fields.hasErrors('coverImage1')} ? has-error : ''">
                                                <label for="primary-image-one" th:text="#{location.image.primary(1)}">Primary Image 1</label>
                                                <div class="thumbnail">
                                                    <img id="primary-image-one-preview" src="http://via.placeholder.com/350x250?text=X" th:src="${location?.coverImage1?.uri ?: 'http://via.placeholder.com/350x250?text=X'}" />
                                                </div>
                                                <input type="file" th:field="*{coverImage1.file}" id="primary-image-one" accept="image/*" />
                                                <input type="hidden" th:field="*{coverImage1.id}" />
                                            </div>
                                            <div class="form-group col-xs-6 location-image" th:classappend="${#fields.hasErrors('coverImage2')} ? has-error : ''">
                                                <label for="primary-image-two" th:text="#{location.image.primary(2)}">Primary Image 2</label>
                                                <div class="thumbnail">
                                                    <img id="primary-image-two-preview" src="http://via.placeholder.com/350x250?text=X" th:src="${location?.coverImage2?.uri ?: 'http://via.placeholder.com/350x250?text=X'}" />
                                                </div>
                                                <input type="file" th:field="*{coverImage2.file}" id="primary-image-two" accept="image/*" />
                                                <input type="hidden" th:field="*{coverImage2.id}" />
                                            </div>
                                        </div>
                                        <div class="form-group" th:if="${location?.id}">
                                            <a th:href="@{/location/church/} + ${location.id} + @{/image/new}"
                                               class="btn btn-default btn-block">
                                                <i class="fa fa-image"></i>
                                                <span th:text="#{image.add}" th:remove="tag">Add New Image</span>
                                            </a>
                                            <a th:href="@{/location/church/} + ${location.id} + @{/image}"
                                               class="btn btn-default btn-block">
                                                <i class="fa fa-image"></i>
                                                <span th:text="#{images.view}" th:remove="tag">View Images</span>
                                            </a>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="row">
                                            <div class="form-group col-xs-12 col-md-6" th:classappend="${#fields.hasErrors('website')} ? has-error : ''">
                                                <label for="website" th:text="#{website}">Website</label>
                                                <input type="url" th:field="*{website}" class="form-control" id="website" th:placeholder="#{location.website.placeholder}" placeholder="Enter the site's official website"/>
                                            </div>
                                            <div class="form-group col-xs-12 col-md-6" th:classappend="${#fields.hasErrors('contactNumber')} ? has-error : ''">
                                                <label for="contact" th:text="#{contact-information}">Contact Information</label>
                                                <input type="text" th:field="*{contactNumber}" class="form-control" id="contact" th:placeholder="#{location.contact.placeholder}" placeholder="Enter the site's contact number"/>
                                            </div>
                                        </div>
                                        <div class="form-group" th:classappend="${#fields.hasErrors('addressLine1')} ? has-error : ''">
                                            <label for="address-line-one" th:text="#{address-line(1)}">Address Line 1</label>
                                            <input type="text" th:field="*{addressLine1}" class="form-control" id="address-line-one" th:placeholder="#{location.address-line-one.placeholder}" placeholder="Enter the site's address (first line)"/>
                                        </div>
                                        <div class="form-group" th:classappend="${#fields.hasErrors('addressLine2')} ? has-error : ''">
                                            <label for="address-line-two" th:text="#{address-line(2)}">Address Line 2</label>
                                            <input type="text" th:field="*{addressLine2}" class="form-control" id="address-line-two" th:placeholder="#{location.address-line-two.placeholder}" placeholder="Enter the site's address (second line)"/>
                                        </div>
                                        <div class="row">
                                            <div class="form-group col-xs-12 col-md-6" th:classappend="${#fields.hasErrors('city')} ? has-error : ''">
                                                <label for="city" th:text="#{city}">City</label>
                                                <input type="text" th:field="*{city}" class="form-control" id="city" th:placeholder="#{location.city.placeholder}" placeholder="Enter the site's city"/>
                                                <p class="help-block" th:if="${#fields.hasErrors('city')}" th:errors="*{city}"></p>
                                            </div>
                                            <div class="form-group col-xs-12 col-md-6" th:classappend="${#fields.hasErrors('zipCode')} ? has-error : ''">
                                                <label for="zip" th:text="#{zip-code}">Zip Code</label>
                                                <input type="text" th:field="*{zipCode}" class="form-control" id="zip" th:placeholder="#{location.zip-code.placeholder}" placeholder="Enter the site's zip code" />
                                                <p class="help-block" th:if="${#fields.hasErrors('zipCode')}" th:errors="*{zipCode}"></p>
                                            </div>
                                        </div>
                                        <div id="map" style="width: 100%; height: 350px; margin-bottom: 15px;"></div>
                                        <div class="row">
                                            <div class="form-group col-xs-12 col-md-6" th:classappend="${#fields.hasErrors('longitude')} ? has-error : ''">
                                                <label for="longitude" th:value="#{longitude}">Longitude</label>
                                                <input type="number"
                                                       step="any"
                                                       th:field="*{longitude}"
                                                       class="form-control"
                                                       id="longitude"
                                                       th:placeholder="#{location.geometry.point.longitude.placeholder}"
                                                       placeholder="Longitude" />
                                                <p class="help-block" th:if="${#fields.hasErrors('longitude')}" th:errors="*{longitude}"></p>
                                            </div>
                                            <div class="form-group col-xs-12 col-md-6" th:classappend="${#fields.hasErrors('latitude')} ? has-error : ''">
                                                <label for="latitude" th:value="#{latitude}">Latitude</label>
                                                <input type="number"
                                                       step="any"
                                                       th:field="*{latitude}"
                                                       class="form-control"
                                                       id="latitude"
                                                       th:placeholder="#{location.geometry.point.latitude.placeholder}"
                                                       placeholder="Latitude" />
                                                <p class="help-block" th:if="${#fields.hasErrors('latitude')}" th:errors="*{latitude}"></p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane fade in show" id="significance">
                            <div class="box-body">
                                <div class="row">
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane fade in show" id="others">
                            <div class="box-body">
                                <div class="row">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="box-footer">
                        <div class="btn-group btn-group-justified" role="group" aria-label="...">
                            <div class="btn-group" role="group">
                                <button type="submit" class="btn btn-primary btn-block" th:value="#{submit}">Submit</button>
                            </div>
                            <div class="btn-group"
                                 role="group"
                                 th:if="${location?.id}">
                                <a id="delete-link" class="btn btn-danger btn-block" th:value="#{delete}">Delete</a>
                            </div>
                            <div class="btn-group" role="group">
                                <button id="reset" type="reset" class="btn btn-default btn-block" th:value="#{reset}">Reset</button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <form action="/location/church/delete"
          th:action="@{/location/church/delete}"
          method="POST" th:if="${location?.id}"
          th:hidden="true">
        <div class="form-group col-xs-12">
            <input name="id" type="hidden" th:value="${location.id}"/>
        </div>
        <div class="form-group col-xs-12">
            <button type="submit" class="btn btn-danger btn-block" th:value="#{delete}">Delete</button>
        </div>
    </form>
</div>
<th:block layout:fragment="scripts">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet.js"
            th:src="@{/webjars/leaflet/0.7.3/leaflet.js}">
    </script>
    <script type="text/javascript" th:inline="javascript">
        /*<![CDATA[*/
        var map = L.map('map').setView([15.4601, 120.6211], 13);
        L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);
        var massSchedulesCount = /*[[${#lists.size(location.massSchedules)}]]*/;
        var confessionSchedulesCount = /*[[${#lists.size(location.confessionSchedules)}]]*/;
        var daysOfWeekAsOptions = '';
        daysOfWeekAsOptions += '<option></option>';
        daysOfWeekAsOptions += '<option value="' + (/*[[${T(java.time.DayOfWeek).SUNDAY.name()}]]*/) + '">'
                            + (/*[[#{sunday}]]*/) + '</option>';
        daysOfWeekAsOptions += '<option value="' + (/*[[${T(java.time.DayOfWeek).MONDAY.name()}]]*/) + '">'
                            + (/*[[#{monday}]]*/) + '</option>';
        daysOfWeekAsOptions += '<option value="' + (/*[[${T(java.time.DayOfWeek).TUESDAY.name()}]]*/) + '">'
                            + (/*[[#{tuesday}]]*/) + '</option>';
        daysOfWeekAsOptions += '<option value="' + (/*[[${T(java.time.DayOfWeek).WEDNESDAY.name()}]]*/) + '">'
                            + (/*[[#{wednesday}]]*/) + '</option>';
        daysOfWeekAsOptions += '<option value="' + (/*[[${T(java.time.DayOfWeek).THURSDAY.name()}]]*/) + '">'
                            + (/*[[#{thursday}]]*/) + '</option>';
        daysOfWeekAsOptions += '<option value="' + (/*[[${T(java.time.DayOfWeek).FRIDAY.name()}]]*/) + '">'
                            + (/*[[#{friday}]]*/) + '</option>';
        daysOfWeekAsOptions += '<option value="' + (/*[[${T(java.time.DayOfWeek).SATURDAY.name()}]]*/) + '">'
                            + (/*[[#{saturday}]]*/) + '</option>';
        var languagesAsOptions = '';
        languagesAsOptions += '<option></option>';
        languagesAsOptions += '<option value="' + (/*[[${T(ph.edu.tsu.tour.web.common.dto.ChurchPayload$SchedulePayload.Language).ENGLISH.name()}]]*/) + '">'
                            + (/*[[#{english}]]*/) + '</option>';
        languagesAsOptions += '<option value="' + (/*[[${T(ph.edu.tsu.tour.web.common.dto.ChurchPayload$SchedulePayload.Language).TAGALOG.name()}]]*/) + '">'
                            + (/*[[#{tagalog}]]*/) + '</option>';
        languagesAsOptions += '<option value="' + (/*[[${T(ph.edu.tsu.tour.web.common.dto.ChurchPayload$SchedulePayload.Language).KAPAMPANGAN.name()}]]*/) + '">'
                            + (/*[[#{kapampangan}]]*/) + '</option>';
        languagesAsOptions += '<option value="' + (/*[[${T(ph.edu.tsu.tour.web.common.dto.ChurchPayload$SchedulePayload.Language).ILOCANO.name()}]]*/) + '">'
                            + (/*[[#{ilocano}]]*/) + '</option>';
        languagesAsOptions += '<option value="' + (/*[[${T(ph.edu.tsu.tour.web.common.dto.ChurchPayload$SchedulePayload.Language).LATIN.name()}]]*/) + '">'
                            + (/*[[#{latin}]]*/) + '</option>';
        var noSchedulesAlert = '';
        noSchedulesAlert += '<div class="callout callout-danger no-schedules-alert">';
        noSchedulesAlert += '<p>' + /*[[#{no-schedules-found}]]*/ + '</p>'
        noSchedulesAlert += '</div>';
        function showNoMassSchedulesAlert() {
            if (massSchedulesCount == 0) {
                $('#mass-schedules-modal > .modal-dialog > .modal-content > .modal-body').prepend(noSchedulesAlert);
            }
        }
        function showNoConfessionSchedulesAlert() {
            if (confessionSchedulesCount == 0) {
                $('#confession-schedules-modal > .modal-dialog > .modal-content > .modal-body').prepend(noSchedulesAlert);
            }
        }
        function deleteMassSchedule(e) {
            var id = $(e.target).attr('data-target');
            $('#' + id).remove();
            --massSchedulesCount;
            showNoMassSchedulesAlert();
        }
        function deleteConfessionSchedule(e) {
            var id = $(e.target).attr('data-target');
            $('#' + id).remove();
            --confessionSchedulesCount;
            showNoConfessionSchedulesAlert();
        }
        $('document').ready(function() {
            $('#canonical-erection-day, #dedication-day').datepicker({
                autoclose: true,
                maxDate: new Date()
            });
            $('#feast-day').datepicker({
                viewMode: 'months',
                format: 'MM dd',
                autoclose: true,
            });
            $('#mass-schedules-modal').on('shown.bs.modal', function() {
                showNoMassSchedulesAlert();
            });
            $('#confession-schedules-modal').on('shown.bs.modal', function() {
                showNoConfessionSchedulesAlert();
            });
            $('.schedules-modal').on('hidden.bs.modal', function () {
                $('.no-schedules-alert').remove();
            });
            $('#mass-schedules-modal .new-schedule').click(function(e){
                var alert = $('.no-schedules-alert');
                if (alert.length) {
                    $(alert).remove();
                }
                var id = 'massSchedules' + massSchedulesCount;
                var name = 'massSchedules[' + massSchedulesCount + ']';
                var element = '';
                element += '<div class="row" id="' + id +'">';
                element += '<div class="col-md-3">';
                element += '<div class="form-group">';
                element += '<select id="' + id + '.day' + '" name="' + name + '.day' + '" class="form-control day" style="width: 100%;">';
                element += daysOfWeekAsOptions;
                element += '</select>';
                element += '</div>';
                element += '</div>';
                element += '<div class="col-md-2">';
                element += '<div class="bootstrap-timepicker">';
                element += '<div class="form-group">';
                element += '<div class="input-group">';
                element += '<input type="text" id="' + id + '.start' + '" name="' + name + '.start' + '" class="form-control timepicker schedule" />';
                element += '<div class="input-group-addon">';
                element += '<i class="fa fa-clock-o"></i>';
                element += '</div>';
                element += '</div>';
                element += '</div>';
                element += '</div>';
                element += '</div>';
                element += '<div class="col-md-2">';
                element += '<div class="bootstrap-timepicker">';
                element += '<div class="form-group">';
                element += '<div class="input-group">';
                element += '<input type="text" id="' + id + '.end' + '" name="' + name + '.end' + '" class="form-control timepicker schedule" />';
                element += '<div class="input-group-addon">';
                element += '<i class="fa fa-clock-o"></i>';
                element += '</div>';
                element += '</div>';
                element += '</div>';
                element += '</div>';
                element += '</div>';
                element += '<div class="col-md-4">';
                element += '<div class="form-group">';
                element += '<select id="' + id + '.language' + '" name="' + name + '.language' + '" class="form-control language" style="width: 100%;">';
                element += languagesAsOptions;
                element += '</select>';
                element += '</div>';
                element += '</div>';
                element += '<div class="col-md-1">';
                element += '<div class="form-group">';
                element += '<button type="button" class="btn btn-danger btn-block delete-schedule" aria-label="delete" data-target="' + id + '" onclick="deleteMassSchedule(event)">';
                element += '<i class="fa fas fa-minus-circle"></i>';
                element += '</button>';
                element += '</div>';
                element += '</div>';
                element += '</div>';
                $('#mass-schedules-modal > .modal-dialog > .modal-content > .modal-body').append(element);
                ++massSchedulesCount;
                $('#' + id + ' .day').select2({
                    placeholder: /*[[#{day.placeholder}]]*/
                });
                $('#' + id + ' .schedule').timepicker({
                    template: false,
                    showInputs: false
                });
                $('#' + id + ' .language').select2({
                    placeholder: /*[[#{language.placeholder}]]*/
                });
            });
            $('#confession-schedules-modal .new-schedule').click(function(e){
                var alert = $('.no-schedules-alert');
                if (alert.length) {
                    $(alert).remove();
                }
                var id = 'confessionSchedules' + confessionSchedulesCount;
                var name = 'confessionSchedules[' + confessionSchedulesCount + ']';
                var element = '';
                element += '<div class="row" id="' + id +'">';
                element += '<div class="col-md-3">';
                element += '<div class="form-group">';
                element += '<select id="' + id + '.day' + '" name="' + name + '.day' + '" class="form-control day" style="width: 100%;">';
                element += daysOfWeekAsOptions;
                element += '</select>';
                element += '</div>';
                element += '</div>';
                element += '<div class="col-md-2">';
                element += '<div class="bootstrap-timepicker">';
                element += '<div class="form-group">';
                element += '<div class="input-group">';
                element += '<input type="text" id="' + id + '.start' + '" name="' + name + '.start' + '" class="form-control timepicker schedule" />';
                element += '<div class="input-group-addon">';
                element += '<i class="fa fa-clock-o"></i>';
                element += '</div>';
                element += '</div>';
                element += '</div>';
                element += '</div>';
                element += '</div>';
                element += '<div class="col-md-2">';
                element += '<div class="bootstrap-timepicker">';
                element += '<div class="form-group">';
                element += '<div class="input-group">';
                element += '<input type="text" id="' + id + '.end' + '" name="' + name + '.end' + '" class="form-control timepicker schedule" />';
                element += '<div class="input-group-addon">';
                element += '<i class="fa fa-clock-o"></i>';
                element += '</div>';
                element += '</div>';
                element += '</div>';
                element += '</div>';
                element += '</div>';
                element += '<div class="col-md-4">';
                element += '<div class="form-group">';
                element += '<select id="' + id + '.language' + '" name="' + name + '.language' + '" class="form-control language" style="width: 100%;">';
                element += languagesAsOptions;
                element += '</select>';
                element += '</div>';
                element += '</div>';
                element += '<div class="col-md-1">';
                element += '<div class="form-group">';
                element += '<button type="button" class="btn btn-danger btn-block delete-schedule" aria-label="delete" data-target="' + id + '" onclick="deleteConfessionSchedule(event)">';
                element += '<i class="fa fas fa-minus-circle"></i>';
                element += '</button>';
                element += '</div>';
                element += '</div>';
                element += '</div>';
                $('#confession-schedules-modal > .modal-dialog > .modal-content > .modal-body').append(element);
                ++confessionSchedulesCount;
                $('#' + id + ' .day').select2({
                    placeholder: /*[[#{day.placeholder}]]*/
                });
                $('#' + id + ' .schedule').timepicker({
                    template: false,
                    showInputs: false
                });
                $('#' + id + ' .language').select2({
                    placeholder: /*[[#{language.placeholder}]]*/
                });
            });

            $('.day').select2({
                placeholder: /*[[#{day.placeholder}]]*/
            });
            $('.language').select2({
                placeholder: /*[[#{language.placeholder}]]*/
            });
            $('.schedule').timepicker({
                template: false,
                showInputs: false
            });

            $('.form-group.location-image > .thumbnail').click(function(e) {
                $(this).siblings('input[type=file]').click();
            });
            $('.form-group.location-image > input[type=file]').change(function() {
                var url = window.URL.createObjectURL($(this)[0].files[0]);
                $(this).siblings('.thumbnail').children('img:first').attr('src', url);
            });
            $('#reset').click(function(e) {
                $('#primary-image-one-preview').attr('src', /*[[${location?.coverImage1?.uri ?: 'http://via.placeholder.com/350x250?text=X'}]]*/ '');
                $('#primary-image-two-preview').attr('src', /*[[${location?.coverImage2?.uri ?: 'http://via.placeholder.com/350x250?text=X'}]]*/ '');
            });

            var lat = $.trim($('#latitude').val());
            if (lat == '' || !$.isNumeric(lat)) {
                lat = 15.4601;
            }
            var long = $.trim($('#longitude').val());
            if (long == '' || !$.isNumeric(long)) {
                long = 120.6211;
            }
            var marker = L.marker([lat, long],{draggable: true}).addTo(map);
            var markerBounds = L.latLngBounds([marker.getLatLng()]);
            map.fitBounds(markerBounds);
            marker.on('dragend', function(event) {
                var marker = event.target;  // You could also simply access the marker through the closure.
                var result = marker.getLatLng();  // But using the passed event is cleaner.
                var lat = result.lat;
                var lng = result.lng;
                console.log('Latitude: '+lat+' Longitude: '+ lng);
                $('#latitude').val(lat);
                $('#longitude').val(lng);
            });

            $('#type').select2({
                placeholder: /*[[#{type.placeholder}]]*/
            });
            $('#artifacts').select2({
                placeholder: /*[[#{artifacts.placeholder}]]*/
            });
            $('#style').select2({
                placeholder: /*[[#{style.placeholder}]]*/
            });
            $('#relics').select2({
                placeholder: /*[[#{relics.placeholder}]]*/
            });
            $('#facilities').select2({
                placeholder: /*[[#{facilities.placeholder}]]*/
            });
            $('#nearbies').select2({
                placeholder: /*[[#{nearby-places.placeholder}]]*/
            });
        });
        /*]]>*/
    </script>
</th:block>
</body>
</html>